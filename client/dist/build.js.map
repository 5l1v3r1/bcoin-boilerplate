{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["/* eslint-disable */\n// `use strict`\nimport \"babel-polyfill\";\nimport {$} from 'jquery';\nimport {MTX, Script} from 'bcoin'\n\n$(function() {\n  'use strict';\n  const formActionButton = $('form button');\n  const messageContainer = $('.server-messages');\n  const apiKey = $('input[name=\"apiKey\"]');\n\n  $.get('/node/fee', (data) => {\n    let value = data.rate;\n    $('input[name=\"fee\"]').val(value);\n  });\n\n  formActionButton.on('click', function(event) {\n    event.preventDefault();\n    const action = $(this).attr('data-action');\n\n    const actionMap = {\n      createWallet: {\n        type: 'POST',\n        url: '/node/wallet',\n        reqFunc: addWallet,\n      },\n      getWallet: {\n        type: 'GET',\n        url: '/node/wallet',\n        reqFunc: getWalletInfo,\n      },\n      sendTx: {\n        type: 'POST',\n        reqFunc: createTransaction,\n      },\n      getAddress: {\n        type: 'POST',\n        reqFunc: getAddress,\n      },\n      createMultisig: {\n        type: 'POST',\n        reqFunc: createMultisigWallet,\n      },\n      addKey: {\n        type: 'PUT',\n        reqFunc: addKey,\n      },\n      createTx: {\n        type: 'POST',\n        reqFunc: createTransaction,\n      },\n      signTx: {\n        type: 'POST',\n        reqFunc: signTransaction,\n      },\n      addData: {\n        type: 'POST',\n        reqFunc: addData,\n      }\n    }\n\n    const form = $(this).parent();\n    const walletId = form.find('input.wallet-id').val();\n    if (!checkInputs(action, form)) return;\n\n    actionMap[action].reqFunc(form, action, walletId)\n      .done(function(response){\n        var prettyResponse = JSON.stringify(response,null,'\\t');\n        var message =\n          '<h4>Server Response:</h4>'\n          .concat('<pre class=\"server-message\" style=\"width:75%;\">')\n          .concat(prettyResponse)\n          .concat('</pre>');\n        messageContainer.html(message);\n      });\n  });\n\n  function checkInputs(action, form) {\n    const walletId = form.find('input.wallet-id');\n    const walletPassphrase = form.find('input.wallet-passphrase');\n\n    // some simple form validation\n    if ((action === 'createWallet' || action === 'sendTx')\n        && (!walletId.val().length || !walletPassphrase.val().length)) {\n      // create wallet and send transaction both need a passphrase\n      alert('Provide an id and a passphrase');\n      return false;\n    } else if (action === 'getWallet' && !walletId.val().length) {\n      // get wallet only needs wallet id\n      alert('Provide an id');\n      return false;\n    }\n\n    return true;\n  };\n\n  function addWallet(form) {\n    const walletId = form.find('input.wallet-id');\n    const walletPassphrase = form.find('input.wallet-passphrase');\n\n    const data = {\n      id: walletId.val(),\n      passphrase: walletPassphrase.val(),\n      type: \"pubkeyhash\",\n    };\n\n    return $.ajax({\n      type: 'POST',\n      url: '/node/wallet',\n      data: JSON.stringify(data),\n      processData: false,\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json'\n    });\n  };\n\n  function getWalletInfo(form) {\n    const walletId = form.find('input.wallet-id').val();\n\n    return $.ajax({\n      type: 'GET',\n      url:'/node/wallet/'.concat(walletId),\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json',\n    });\n  };\n\n  function getAddress(form) {\n    const walletId = form.find('input.wallet-id').val();\n\n    return $.ajax({\n      type: 'POST',\n      url: '/node/wallet/'.concat(walletId).concat('/address'),\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json',\n    });\n  }\n\n  function createTransaction(form, action) {\n    const walletId = form.find('input.wallet-id').val();\n    const passphrase = form.find('input.wallet-passphrase').val();\n    const rate = form.find('input[name=\"fee\"]').val();\n    const address = form.find('input[name=\"destination\"]').val();\n    const value = form.find('input[name=\"tx-amount\"]').val();\n\n    let endpoint;\n\n    if (action === 'sendTx') {\n      endpoint = '/send';\n    } else if (action === 'createTx') {\n      endpoint = '/create';\n    } else {\n      endpoint = '/';\n    }\n\n    const data = {\n      rate,\n      passphrase,\n      outputs: [{\n        value,\n        address,\n      }],\n    };\n\n    return $.ajax({\n      type: 'POST',\n      url: '/node/wallet/'.concat(walletId, endpoint),\n      data: JSON.stringify(data),\n      processData: false,\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json'\n    });\n  };\n\n\n  function createMultisigWallet(form) {\n    const walletId = form.find('input.wallet-id').val();\n    const passphrase = form.find('input.wallet-passphrase').val();\n    const m = form.find('input[name=\"m\"]').val();\n    const n = form.find('input[name=\"n\"]').val();\n\n    const data = {\n      id: walletId,\n      passphrase,\n      type: \"multisig\",\n      m,\n      n,\n    };\n\n    return $.ajax({\n      type: 'POST',\n      url: '/node/wallet',\n      data: JSON.stringify(data),\n      processData: false,\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json'\n    });\n  };\n\n  function addKey(form) {\n    const walletId = form.find('input.wallet-id').val();\n    const accountKey = form.find('input[name=\"accountKey\"]').val();\n\n    const data = {\n      accountKey,\n    };\n\n    return $.ajax({\n      type: 'PUT',\n      url: '/node/wallet/'.concat(walletId).concat('/shared-key'),\n      data: JSON.stringify(data),\n      processData: false,\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json'\n    });\n  }\n\n  function signTransaction(form, action, walletId) {\n    const passphrase = form.find('input.wallet-passphrase').val();\n    const mtx = MTX.fromOptions(form.find('textarea[name=\"tx\"]').val());\n\n    console.log('is mtx?', mtx.isMTX(mtx));\n    const data = {passphrase, tx: mtx};\n    console.log('data: ', data);\n    // console.log(JSON.stringify(data));\n    return $.ajax({\n      type: 'POST',\n      url: '/node/wallet/'.concat(walletId).concat('/sign'),\n      data: JSON.stringify(data),\n      processData: false,\n      beforeSend: function (xhr) {\n          xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n      },\n      contentType: 'application/json'\n    });\n  }\n\n  function addData(form, action, walletId) {\n    const passphrase = form.find('input.wallet-passphrase').val();\n    const rate = form.find('input[name=\"fee\"]').val();\n    const data = form.find('textarea[name=\"data\"]').val();\n    const opcodes = Script.opcodes;\n    let script = new Script();\n\n    script.push(opcodes.OP_RETURN);\n    script.push(data);\n    script.compile();\n\n    script = script.toJSON();\n    const outputs = {\n      rate,\n      passphrase,\n      outputs: [{\n        value: 0,\n        script,\n      }],\n    };\n\n    return $.ajax({\n        type: 'POST',\n        url: '/node/wallet/'.concat(walletId, '/send'),\n        data: JSON.stringify(outputs),\n        processData: false,\n        beforeSend: function (xhr) {\n            xhr.setRequestHeader (\"Authorization\", \"Basic \" + btoa('' + \":\" + apiKey.val()));\n        },\n        contentType: 'application/json'\n      });\n  };\n});\n"]}